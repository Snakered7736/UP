# Сайт ФК Анжил - Итоги разработки

## Что реализовано

### Frontend (11 HTML страниц)
- **index.html** - Главная страница с информацией о клубе
- **shop.html** - Магазин клубной атрибутики с управлением запасами
- **tickets.html** - Страница покупки билетов на матчи
- **media.html** - Новости клуба
- **transfers.html** - Трансферы игроков
- **squad.html** - Состав команды
- **history.html** - История клуба
- **profile.html** - Личный кабинет пользователя
- **login.html** - Страница входа
- **register.html** - Страница регистрации
- **checkout.html** - Оформление заказа

### Backend (Python + Flask)
- **app.py** - Главное приложение с Swagger
- **config.py** - Настройки (SECRET_KEY, DATABASE)
- **seed_data.py** - Заполнение БД начальными данными
- **clean_database.py** - Очистка БД (сохраняет пользователей)

### Модули
- **routes/** - 9 Blueprint модулей для API
- **services/** - auth_service.py (JWT, bcrypt)
- **utils/** - database.py (создание таблиц, миграции)

### База данных (SQLite)
10 таблиц:
1. users - Пользователи (с ролями: user, admin)
2. players - Игроки команды
3. news - Новости
4. products - Товары магазина (+ quantity)
5. matches - Матчи (+ total_tickets, sold_tickets)
6. tickets - Билеты на матчи
7. transfers - Трансферы игроков
8. orders - Заказы
9. order_items - Позиции заказов
10. payment_methods - Способы оплаты

## Ключевые фичи

### 1. Система управления запасами
**Товары:**
- Каждый товар имеет поле `quantity` (количество на складе)
- При покупке quantity автоматически уменьшается
- Когда quantity = 0, кнопка "КУПИТЬ" отключается (серая)
- На странице магазина показывается "В наличии: X шт."

**Билеты:**
- При создании матча админ указывает `total_tickets`
- При покупке автоматически увеличивается `sold_tickets`
- Показывается "Осталось билетов: X"
- Когда билеты распроданы, кнопка отключается
- Прошедшие матчи автоматически скрываются со страницы
- Но остаются в истории заказов пользователя

### 2. Корзина покупок
- Работает с товарами и билетами
- Сохраняется в localStorage
- Не закрывается при клике внутри корзины
- Показывает количество и общую сумму

### 3. История заказов
- Показывает все покупки пользователя
- Для товаров: фото, название, количество
- Для билетов: название матча, дата
- Даже если матч прошёл - остаётся в истории

### 4. Админ-панель
- Добавление матчей с логотипами и количеством билетов
- Добавление трансферов с фото игроков
- Добавление новостей
- Удаление матчей

### 5. JWT Аутентификация
- Регистрация и вход
- Токены хранятся в localStorage
- Роли: user, admin
- Проверка токенов на backend

## Технологии

### Frontend
- HTML5 (семантическая вёрстка)
- CSS3 (встроенные стили, переменные, grid/flexbox)
- Vanilla JavaScript (без фреймворков)
- LocalStorage для корзины и токенов

### Backend
- Python 3
- Flask (веб-фреймворк)
- Flask-CORS (Cross-Origin)
- Flasgger (Swagger UI)
- PyJWT (JSON Web Tokens)
- Werkzeug (хеширование паролей)
- SQLite3 (база данных)

## API Endpoints

### Публичные
- GET /api/players - Игроки
- GET /api/products - Товары
- GET /api/matches - Матчи
- GET /api/transfers - Трансферы
- GET /api/news - Новости
- POST /api/auth/register - Регистрация
- POST /api/auth/login - Вход

### Защищённые (требуют токен)
- GET /api/profile - Профиль
- PUT /api/profile - Обновить профиль
- GET /api/profile/orders - История заказов
- POST /api/orders - Создать заказ

### Только для админа
- POST /api/matches - Создать матч
- DELETE /api/matches/:id - Удалить матч
- POST /api/transfers - Создать трансфер
- POST /api/news - Создать новость

## Запуск проекта

```bash
# 1. Backend
cd c:\up\backend
pip install -r requirements.txt
python seed_data.py
python app.py

# 2. Frontend
# Открыть в браузере: c:\up\frontend\index.html

# 3. Swagger UI
# http://localhost:5000/swagger/
```

## Тестовые данные

**Администратор:**
- Email: admin@anzhi.ru
- Пароль: admin123

**Игроки:** 7 человек
**Товары:** 6 позиций (по 10 штук каждого)

## Управление базой данных

Очистить БД (сохраняет пользователей):
```bash
cd c:\up\backend
python clean_database.py
python seed_data.py
```

## Документация

- **README.md** - Главная документация
- **API_DOCS.md** - Описание всех API эндпоинтов
- **ERD.md** - Диаграмма связей БД
- **TECH_STACK_CHECKLIST.md** - Проверка требований
- **ЗАПУСК.md** - Инструкция по запуску
- **Swagger UI** - http://localhost:5000/swagger/

## Статистика

- HTML страниц: 11
- Python файлов: 17
- JavaScript файлов: 2
- API эндпоинтов: 25+
- Таблиц БД: 10
- Строк кода: ~5500+

---

**Проект готов к использованию!**

Дата завершения: 11 декабря 2025
